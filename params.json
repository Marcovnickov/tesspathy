{"name":"Tesspathy","tagline":"JS library for converting paths of 2d graphics into triangles for GL-like APIs","body":"# Tesspathy\r\n\r\n[Live demo](http://gree.github.io/tesspathy/demos/drawing_pad/)\r\n\r\n## Description\r\n\r\nTesspathy is a Javascript utility library for converting vector representation (aka path) of 2d graphics into the form (basically triangles) capable of being fed to GL-like (e.g. WebGL) APIs.\r\n\r\n## Features\r\n\r\n* Tessellate not only polygons, but also quadratic Bezier curves, into a resolution independent form.\r\n* Tessellate not only filled regions, but also straight/curve strokes.\r\n* Holes and separated regions supported, with no need of explicit declaration.\r\n* Without any post-processing, all necessary basic data for rendering by WebGL is ready in output. \r\n* No extra dependencies. Input and output are all plain Javascript Arrays.\r\n* Reasonable degree of error tolerance.\r\n\r\n## Installation\r\n\r\nInstall using npm\r\n```\r\nnpm install tesspathy\r\n```\r\n\r\nThen require it into any module\r\n```js\r\nvar Tesspathy = require('tesspathy');\r\nvar tLoactions = [/* ... */], tLabels = [/* ... */];\r\nvar tResult = Tesspathy.triangulate(tLocations, tLabels);\r\n```\r\n\r\nTo use Tesspathy from a browser, download the appropriate file(s) from the following:\r\n\r\n* [dist/tesspathy.js](dist/tesspathy.js): uncompressed JS file\r\n* [dist/tesspathy.min.js](dist/tesspathy.min.js): compressed JS file\r\n* [dist/tesspathy.min.js.map](dist/tesspathy.min.js.map): source map file\r\n\r\nAnd then add it as a script tag to your page\r\n```html\r\n<script src=\"tesspathy.min.js\"></script>\r\n<script>\r\n  var tLoactions = [/* ... */], tLabels = [/* ... */];\r\n  var tResult = Tesspathy.triangulate(tLocations, tLabels);\r\n</script>\r\n```\r\n## Usage\r\n\r\n[Live demo](http://gree.github.io/tesspathy/demos/drawing_pad/)\r\n\r\n### API\r\n\r\nInput data of shape contours with one or multiple separated regions, zero or multiple holes, can be all passed in together, without explicit separation. The same for lines with one or multiple connected/disconnected strokes.\r\n\r\n#### Tesspathy.triangulate(locations, labels)\r\n\r\nTessellate one or multiple closed shapes (with zero or multiple holes possibly) defined by ```locations``` and ```labels```.\r\n\r\n#### Tesspathy.triangulateLine(locations, labels, lineStyle)\r\n\r\nTessellate one or multiple strokes defined by ```locations```, ```labels```, and ```lineStyle```.\r\n\r\n#### Tesspathy.setFillCoordinates(fillCoordinates)\r\n\r\nSet the values to be used when generating the ```fillCoordinates``` field of the output object of both ```Tesspathy.triangulate``` and ```Tesspathy.triangulateLine```.\r\nThe meaning and usage of this ```fillCoordinates``` is not defined in the scope of Tesspathy project. One possible usage is to pass it as another vertex attribute to shader program for certain rendering effects, such as resolution independent curve ([live demo](http://gree.github.io/tesspathy/demos/drawing_pad/)).\r\n\r\n#### Tesspathy.getFillCoordinates()\r\n\r\nGet the current values used to generate the ```fillCoordinates``` field of the output object.\r\n\r\n### Parameters\r\n\r\n#### locations\r\n\r\nArray of point locations, of the following form:\r\n```js\r\n[ \r\n  [x0, y0], [x1, y1], [x2, y2], ... , [xN, yN],    // 1st shape or line\r\n  [xN+1, yN+1], [xN+2, yN+2], ... , [xN+M, yN+M],  // 2nd shape or line\r\n  ...   // more shapes or lines\r\n]\r\n```\r\n\r\n* For each single closed shape (not line), the last point location must be the same with the first location.\r\n* The order of point locations (clockwise or counterclockwise) is not restricted, but within a single ```locations``` array, all the contours should be in the same order while all the holes should be in the reversed order.\r\n\r\n#### labels\r\n\r\nArray of point labels to indicating\r\n1. the start of a new shape or line,\r\n2. normal point or control point(of Bezier curve).\r\n\r\nFor example:\r\n```js\r\n// START = [Tesspathy.PATH_START], ANCHOR = [Tesspathy.PATH_ANCHOR], CONTROL = [Tesspathy.PATH_CONTROL];\r\n\r\n[\r\n  START, ANCHOR, CONTROL, ..., ANCHOR,   // 1st shape or line\r\n  START, CONTROL, ANCHOR, ..., ANCHOR,   // 2nd shape or line\r\n  ...   // more shapes or lines\r\n]\r\n```\r\n\r\n* For each single closed shape or line, the first label must be ```START``` and the last must be ```ANCHOR```.\r\n* The label of point with location ```locations[i]``` should be ```labels[i][0]```.\r\n\r\n#### lineStyle\r\n\r\nObject defining the line style used to render strokes, of the following form:\r\n```js\r\n{\r\n  width: 20,\r\n  cap: 'round',\r\n  join: 'round'\r\n};\r\n```\r\n\r\n* The value of ```width``` will be regarded as using the same length unit of ```locations```.\r\n* By now, the only supported line join/cap is ```'round'```.\r\n\r\n#### fillCoordinates\r\n\r\nObject defining the values to be used when generating the ```fillCoordinates``` field of the output. For example:\r\n```js\r\n{\r\n  straight: {s: STRAIGHT_S, t: STRAIGHT_T},\r\n  out_anchor0: {s: OUT_ANCHOR0_S, t: OUT_ANCHOR0_T},\r\n  out_control: {s: OUT_CONTROL_S, t: OUT_CONTROL_T},\r\n  out_anchor1: {s: OUT_ANCHOR1_S, t: OUT_ANCHOR1_T},\r\n  in_anchor0: {s: IN_ANCHOR0_S, t: IN_ANCHOR0_T},\r\n  in_control: {s: IN_CONTROL_S, t: IN_CONTROL_T},\r\n  in_anchor1: {s: IN_ANCHOR1_S, t: IN_ANCHOR1_T}\r\n}\r\n```\r\n\r\n### Output\r\n\r\nThe output of both ```Tesspathy.triangulate``` and ```Tesspathy.triangulateLine``` will be an Object of the following form:\r\n```js\r\n{\r\n  triangleLocations: [x0, y0, x1, y1, ..., xK, yK]\r\n  fillCoordinates: [s0, t0, s1, t1, ..., sK, yK]\r\n  triangleIndices: [0, 1, 2, 1, 3, 4, ..., K-5, K-3, K-2]\r\n}\r\n```\r\n\r\nThis output can be used directly by WebGL. For example:\r\n```js\r\n ... \r\nvar tPosition = gl.getAttribLocation(...);\r\ngl.bufferData(gl.ARRAY_BUFFER, new Float32Array(result.triangleLocations), gl.STATIC_DRAW);\r\ngl.vertexAttribPointer(tPosition, 2, gl.FLOAT, false, 0, 0);\r\n\r\nvar tCoord = gl.getAttribLocation(...);\r\ngl.bufferData(gl.ARRAY_BUFFER, new Float32Array(result.fillCoordinates), gl.STATIC_DRAW);\r\ngl.vertexAttribPointer(tCoord, 2, gl.FLOAT, false, 0, 0);\r\n\r\ngl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(result.triangleIndices), gl.STATIC_DRAW); \r\n\r\ngl.drawElements(gl.TRIANGLES, result.triangleIndices.length, gl.UNSIGNED_SHORT, 0);\r\n```\r\n\r\nThus, if you set your GL status and matrix uniform(s) correctly, and write your shaders (especially fragment shader) well, you will see your shapes or lines defined in vector form being rendered by using WebGL. If there is any problem, please first have a look at the [live demo](http://gree.github.io/tesspathy/demos/drawing_pad/) provided.\r\n\r\n\r\n## Note\r\n\r\n* Shapes with self-crossing contours will result in undefined behaviour.\r\n* By now, the only supported curve type is quadratic Bezier curve.\r\n\r\n\r\n## Author\r\n\r\nGuangyao Liu\r\n\r\n## Contributions\r\n\r\nWe use GitHub issues to track requests and public bugs. Please ensure your description is clear and has sufficient instructions to be able to reproduce the issue.\r\n\r\n## Licence\r\n\r\nCopyright &copy; 2015 Guangyao Liu / GREE, Inc.\r\n\r\nLicensed under the MIT License.","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}